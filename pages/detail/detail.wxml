<!--pages/detail/detail.wxml-->
<import src="/template/reply/reply"/>
<view class="page-container">
	<view class="userInfo-section" wx:for="{{topic}}" wx:key="_id">
		<image class="userInfo-image" src="{{item.userInfo[0].avatar}}"></image>
		<view class="userInfo-content">
			<view class="user-name">{{item.userInfo[0].name}}</view>
			<view class="create-time">{{item.created_at}}</view>
		</view>
	</view>
	<view class="topic-section" wx:for="{{topic}}" wx:key="_id">
    <rich-text class="topic-content" nodes="{{item.content}}"></rich-text>
    <view class="image-list" wx:if="{{item.imageList.length > 0}}">
      <image class="image-item {{num}}" mode="aspectFill" wx:for="{{item.imageList}}" wx:key="_id" wx:for-item="image" src="{{image}}" data-src="{{image}}" catchtap="previewImage"></image>
    </view>
    <view class="video-list" wx:if="{{item.videoList.length > 0}}">
      <video class="video-item" controls wx:for="{{item.videoList}}" wx:key="_id" wx:for-item="video" src="{{video}}"></video>
    </view>
	</view>
	<view class="reply-section">
	  <view class="reply-form" wx:if="{{hasUser}}">
			<input type="text" class="reply-input" placeholder="评论点啥" value="{{inputValue}}" bindinput="handleChange"/>
			<button class="reply-sumbit" hover-class="reply-sumbit_hover" style="width: 21%;height: 100rpx;" bindtap="handleSubmit">评论</button>
		</view>
		<button class="login-btn" style="width: 100%;height: 100rpx;margin: 0 30rpx;" wx:if="{{!hasUser}}" bindtap="getUserInfo">登录后评论</button>
    <recycle-view class="reply-list" batch="{{batchSetRecycleData}}" id="recycleReplyId" scroll-top="{{scrollTop}}" scroll-with-animation="true" height="600" bindscrolltolower="scrolltolower" bindscroll="pageScroll" refresherenabled="{{true}}" refreshertriggered="{{triggered}}" bindrefresherrefresh="onRefresh">
      <recycle-item class="reply-item" wx:for="{{recycleReplyList}}" wx:key="_id">
        <template is="reply" data="{{item}}"/>
      </recycle-item>
    </recycle-view>
    <view class="detail-toTop" hover-class="detail-toTop_hover" wx:if="{{cangotop}}" bindtap="handletoTop">↑</view>
	</view>
</view>
